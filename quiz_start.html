<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz en cours – Prépa TCF</title>
    <meta name="description" content="Répondez aux questions du quiz TCF.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="quiz_start.css">
</head>
<body>

    <!-- HEADER -->
    <header>
        <nav>
            <ul>
                <li><a href="main-fr.html">Accueil</a></li>
                <li><a href="quiz.html" class="nav-active">Quiz</a></li>
                <li><a href="exercices.html">Exercices</a></li>
                <li>
                    <div class="lang-switcher">
                        <a href="main-fr.html" class="lang-option" data-lang="fr">FR</a>
                        <span class="lang-divider">|</span>
                        <a href="main-en.html" class="lang-option" data-lang="en">EN</a>
                    </div>
                </li>
                <li><button type="button" class="btn-login" onclick="window.location='auth.html'">Connexion</button></li>
            </ul>
        </nav>
    </header>

    <!-- MAIN -->
    <main>

        <!-- ═══════════════════════════════════════════════════════ -->
        <!-- CHARGEMENT INITIAL -->
        <!-- ═══════════════════════════════════════════════════════ -->
        <section class="quiz-loading" id="quiz-loading">
            <div class="loading-container">
                <div class="spinner"></div>
                <p>Chargement de votre quiz...</p>
            </div>
        </section>

        <!-- ═══════════════════════════════════════════════════════ -->
        <!-- QUIZ EN COURS -->
        <!-- ═══════════════════════════════════════════════════════ -->
        <section class="quiz-active" id="quiz-active" style="display: none;">
            <div class="quiz-container">

                <!-- Header avec progression -->
                <div class="quiz-header">
                    <div class="quiz-info">
                        <span class="quiz-category-label" id="current-category">Grammaire</span>
                        <span class="quiz-level-label" id="current-level">A1</span>
                    </div>
                    <button class="btn-quit" id="btn-quit">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                        Quitter
                    </button>
                </div>

                <!-- Barre de progression -->
                <div class="progress-section">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-current">1</span> / <span id="progress-total">25</span>
                    </div>
                </div>

                <!-- Question -->
                <div class="question-card" id="question-card">
                    <h2 class="question-text" id="question-text">Chargement de la question...</h2>

                    <!-- Choix de réponses -->
                    <div class="answers-grid" id="answers-grid">
                        <!-- Les réponses seront injectées ici par JS -->
                    </div>

                    <!-- Zone de feedback (apparaît après réponse) -->
                    <div class="feedback-zone" id="feedback-zone" style="display: none;">
                        <div class="feedback-icon" id="feedback-icon"></div>
                        <div class="feedback-content">
                            <h3 id="feedback-title">Correct !</h3>
                            <p id="feedback-explanation">Explication de la réponse...</p>
                        </div>
                    </div>

                    <!-- Bouton Suivant (apparaît après réponse) -->
                    <button class="btn-primary btn-next" id="btn-next" style="display: none;">
                        Question suivante
                    </button>
                </div>
            </div>
        </section>

        <!-- ═══════════════════════════════════════════════════════ -->
        <!-- RÉSULTATS -->
        <!-- ═══════════════════════════════════════════════════════ -->
        <section class="quiz-results" id="quiz-results" style="display: none;">
            <div class="results-container">
                <div class="results-header">
                    <div class="results-icon">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                    </div>
                    <h1>Quiz terminé !</h1>
                    <p class="results-subtitle">Voici vos résultats</p>
                </div>

                <!-- Score principal -->
                <div class="score-display">
                    <div class="score-circle">
                        <svg class="score-svg" width="180" height="180">
                            <circle class="score-bg" cx="90" cy="90" r="75"></circle>
                            <circle class="score-fill" id="score-circle" cx="90" cy="90" r="75"></circle>
                        </svg>
                        <div class="score-text">
                            <span class="score-number" id="score-percentage">80</span>
                            <span class="score-label">%</span>
                        </div>
                    </div>
                    <div class="score-details">
                        <p><strong id="score-correct">20</strong> / <span id="score-total">25</span> bonnes réponses</p>
                    </div>
                </div>

                <!-- Détails -->
                <div class="results-stats">
                    <div class="stat-item">
                        <div class="stat-icon correct">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </div>
                        <span class="stat-label">Correctes</span>
                        <span class="stat-value" id="stat-correct">20</span>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon incorrect">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </div>
                        <span class="stat-label">Incorrectes</span>
                        <span class="stat-value" id="stat-incorrect">5</span>
                    </div>
                </div>

                <!-- Points d'amélioration -->
                <div class="improvement-section">
                    <h3>Points d'amélioration</h3>
                    <div class="improvement-list" id="improvement-list">
                        <!-- Injecté par JS -->
                    </div>
                </div>

                <!-- Actions -->
                <div class="results-actions">
                    <button class="btn-primary" id="btn-restart">Recommencer un quiz</button>
                    <button class="btn-secondary" onclick="window.location='exercices.html'">Aller aux exercices</button>
                </div>
            </div>
        </section>

        <!-- ═══════════════════════════════════════════════════════ -->
        <!-- ERREUR -->
        <!-- ═══════════════════════════════════════════════════════ -->
        <section class="quiz-error" id="quiz-error" style="display: none;">
            <div class="error-container">
                <div class="error-icon">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                </div>
                <h2>Aucun exercice disponible</h2>
                <p id="error-message">Désolé, il n'y a pas encore d'exercices pour cette catégorie et ce niveau.</p>
                <button class="btn-primary" onclick="window.location='quiz.html'">Retour à la sélection</button>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer>
        <div class="footer-content">
            <div class="author-block">
                <p>Créé par <strong>MOHAMMEDI Noureddine</strong></p>
            </div>
            <div class="footer-links">
                <a href="#about">À propos</a>
                <a href="#contact">Contact</a>
                <a href="#privacy">Mentions légales</a>
            </div>
        </div>
    </footer>

    <script src="quiz_start.js"></script>

</body>
</html>